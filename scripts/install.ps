# Stop on first error
$ErrorActionPreference = "Stop"

$VenvPath = ".\.venv"

Write-Host "ğŸ”§ Checking for Python..."
$python = Get-Command python -ErrorAction SilentlyContinue
if (-not $python) {
    Write-Host "âŒ Python not found. Please install Python 3."
    exit 1
}

if (-not (Test-Path $VenvPath)) {
    Write-Host "ğŸ“¦ Creating virtual environment in .venv..."
    python -m venv .venv
}

Write-Host "ğŸ“‚ Activating virtual environment..."
& .\.venv\Scripts\Activate.ps1

Write-Host "â¬†ï¸ Upgrading pip..."
pip install --upgrade pip

if (Test-Path "requirements.txt") {
    Write-Host "ğŸ“œ Installing dependencies..."
    pip install -r requirements.txt
} else {
    Write-Host "âš ï¸ requirements.txt not found. Skipping installation."
}

Write-Host "âœ… Setup complete."